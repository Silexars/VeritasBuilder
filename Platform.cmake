INCLUDE("Platform.Android.cmake")
INCLUDE("Platform.Emscripten.cmake")

FUNCTION(VERITAS_SET_PLATFORM_PROPERTIES TARGET PARAMETER)
    IF(${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
        SET(PLATFORM "MacOS")
    ELSE()
        SET(PLATFORM ${CMAKE_SYSTEM_NAME})
    ENDIF()

    IF(NOT PARAMETER STREQUAL "INTERFACE")
        SET_PROPERTY(TARGET ${TARGET} PROPERTY "Platform" ${PLATFORM})

        IF(PLATFORM STREQUAL "Linux" OR PLATFORM STREQUAL "MacOS" OR PLATFORM STREQUAL "iOS" OR PLATFORM STREQUAL "Android")
            SET_PROPERTY(TARGET ${TARGET} PROPERTY "PlatformIsUnix" "True")
        ENDIF()

        IF(PLATFORM STREQUAL "Linux" OR PLATFORM STREQUAL "MacOS" OR PLATFORM STREQUAL "Windows")
            SET_PROPERTY(TARGET ${TARGET} PROPERTY "PlatformIsDesktop" "True")
        ENDIF()

        IF(PLATFORM STREQUAL "Android" OR PLATFORM STREQUAL "iOS" OR PLATFORM STREQUAL "Emscripten")
            SET_PROPERTY(TARGET ${TARGET} PROPERTY "PlatformIsMobile" "True")
        ENDIF()
    ENDIF()
ENDFUNCTION()

FUNCTION(VERITAS_PLATFORM_ADD_EXECUTABLE TARGET)
    GET_PROPERTY(PLATFORM TARGET ${TARGET} PROPERTY "Platform")
    IF(PLATFORM STREQUAL "Emscripten")
        VERITAS_EMSCRIPTEN_ADD_EXECUTABLE(${TARGET} ${ARGN})
    ELSEIF(PLATFORM STREQUAL "Android")
        VERITAS_ANDROID_ADD_EXECUTABLE(${TARGET} ${ARGN})
    ENDIF()
ENDFUNCTION()
